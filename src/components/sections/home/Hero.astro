---
import heroImg from "../../../assets/haedo.jpg";
import { Image } from "astro:assets";
---

<header class="relative w-full h-screen flex items-center justify-center overflow-hidden z-20">
  <div class="absolute inset-0 -z-10 overflow-hidden">
    <div class="absolute inset-0 bg-linear-to-b from-black/80 via-black/20 to-black z-10"></div>
    <Image
      src={heroImg}
      alt="Samana Interior"
      class="hero-img w-full h-full object-cover scale-125 opacity-0 grayscale brightness-110"
      widths={[400, 800, 1200, 2000]}
      loading="eager"
      fetchpriority="high"
    />
  </div>

  <div class="relative text-center px-4 mix-blend-difference text-white w-full select-none">
    <div class="overflow-hidden py-2">
      <h1
        id="hero-title"
        class="text-[14vw] md:text-[12vw] leading-[0.8] font-black tracking-tighter will-change-transform"
      >
        SAMANA
      </h1>
    </div>
    <div class="overflow-hidden">
      <p
        id="hero-subtitle"
        class="text-sm md:text-xl font-medium tracking-[0.6em] text-white/90 uppercase will-change-transform"
      >
        Transformaciones
      </p>
    </div>
  </div>
</header>

<script>
  import gsap from "gsap";

  function initHeroAnimation() {
    const tl = gsap.timeline({ 
      defaults: { ease: "expo.out" } 
    });

    // Seteamos estado inicial para evitar flashes (FOUC)
    gsap.set(["#hero-title", "#hero-subtitle"], { yPercent: 100 });

    tl.to(".hero-img", {
      scale: 1,
      opacity: 0.5,
      duration: 2.5,
    })
    .to("#hero-title", {
      yPercent: 0,
      duration: 1.8,
    }, "-=2") // Solapamiento elegante
    .to("#hero-subtitle", {
      yPercent: 0,
      duration: 1.5,
    }, "-=1.4");
  }

  // Escuchamos el evento de Astro para que funcione siempre, incluso al navegar
  document.addEventListener("astro:page-load", initHeroAnimation);
</script>